{"version":3,"sources":["../assets/scripts/script.js"],"names":["$","document","ready","length","fn","flickity","arrowShape","each","index","element","galleryaSlider","this","closest","galleryaSliderData","data","navigation","pageDots","thumbnails","find","count","sliderArgs","cellAlign","contain","wrapAround","imagesLoaded","watchCSS","addClass","flickityData","thumbnailsArgs","asNavFor","groupCells","on","selectedIndex","className","removeClass","eq","slideNumber","text","slides","e","target","event","stopPropagation","lightGallery","thumbnail","showThumbByDefault","subHtmlSelectorRelative","selector","$thumbnailSliderEl","parent","first","thumbnailSliderArgs","thumbnailSpacingUnit","parseInt","getComputedStyle","get","getPropertyValue","thumbnailSliderMargin","initialImgsWidth","width","thumbnailSliderWidth","maxCols","noCols","style","setProperty","$thumbnailSlider","variation","thumbnailIndex","image","gallery_thumbnail_src","firstImage","parents","attr","jQuery"],"mappings":"CAAA,SAAAA,GACAA,EAAAC,UAAAC,MAAA,WAEA,GAAAF,EAAA,uBAAAG,OAAA,GAAA,kBAAAH,GAAAI,GAAAC,SAAA,CACA,GAAAC,GAAA,4UACAN,GAAA,uBAAAO,KAAA,SAAAC,EAAAC,GACA,GAAAC,GAAAV,EAAAW,MAAAC,QAAA,0DACAC,EAAAH,EAAAI,OACAC,EAAAF,EAAA,mBACAG,EAAAH,EAAA,iBACAI,EAAAP,EAAAQ,KAAA,iCACAC,EAAAT,EAAAQ,KAAA,yBACAE,GACAC,UAAA,OACAC,SAAA,EACAC,YAAA,EACAC,cAAA,EACAC,UAAA,EACAnB,WAAAA,EAEA,oBAAAU,GAEAI,EAAAJ,SAAA,GAAAA,GAEA,GAAAD,GAAAE,EAAAd,OAAA,KACAiB,EAAAJ,UAAA,GAGAhB,EAAAW,MAAAe,SAAA,YACA1B,EAAAW,MAAAN,SAAAe,EACA,IAAAO,GAAA3B,EAAAW,MAAAG,KAAA,WACA,IAAAG,EAAAd,OAAA,EAAA,CACA,GAAAyB,IACAC,SAAApB,EACAa,SAAA,EACAN,UAAA,EACAQ,cAAA,EACAM,YAAA,EACAxB,WAAAA,EAEAW,GAAAZ,SAAAuB,GAEA5B,EAAAW,MAAAoB,GAAA,kBAAA,WACA,GAAAvB,GAAAmB,EAAAK,cACAC,EAAA,uBACAhB,GAAAC,KAAA,uBAAAgB,YAAAD,GACAE,GAAA3B,GAAAkB,SAAAO,KAGAd,GACAnB,EAAAW,MAAAoB,GAAA,kBAAA,WACA,GAAAK,GAAAT,EAAAK,cAAA,CACAb,GAAAkB,KAAAD,EAAA,IAAAT,EAAAW,OAAAnC,YAKAH,EAAA,mCAAA+B,GAAA,QAAA,SAAAQ,GAEA,GAAA,IAAAvC,EAAAuC,EAAAC,QAAA5B,QAAA,8BAAAT,OAEA,MADAsC,OAAAC,mBACA,IAoBA,GAfA,kBAAA1C,GAAAI,GAAAuC,eACA3C,EAAA,yBAAA2C,cACAC,WAAA,EACAC,oBAAA,EACAC,yBAAA,EACAC,SAAA,yBAEA/C,EAAA,gCAAA2C,cACAC,WAAA,EACAC,oBAAA,EACAC,yBAAA,EACAC,SAAA,6CAIA/C,EAAA,yCAAAG,OAAA,GAAA,kBAAAH,GAAAI,GAAAC,SAAA,CACA,KAAA2C,GAAAhD,EAAA,yCAAAiD,SAAA/B,KAAA,wBAAAgC,QACAC,GACA7B,SAAA,EACAN,UAAA,EACAQ,cAAA,EACAM,YAAA,GAIAsB,EAAAC,SAAAC,iBAAAN,EAAAO,IAAA,IAAAC,iBAAA,4BAAA,IACAC,EAAAJ,SAAAC,iBAAAN,EAAAO,IAAA,IAAAC,iBAAA,6BAAA,IACAE,EAAAV,EAAA9B,KAAA,MAAAgC,QAAAS,QACAC,EAAAZ,EAAAW,QACAE,EAAA,CACA,IAAAC,GAAA,CACA,IAAAJ,EAAA,GAAAE,EAAAF,EAAA,CACA,MAAAE,EAAA,EAAAH,EAAAL,EAAAU,IAAAA,EAAA,IAAAJ,IACAI,IACAA,IAAAD,KAKAb,EAAAO,IAAA,GAAAQ,MAAAC,YAAA,oBAAAF,GAIAd,EAAAtB,SAAA,WACA,MAAAuC,GAAAjB,EAAA3C,SAAA8C,EAGAnD,GAAA,0BAAA+B,GAAA,iBAAA,SAAAU,EAAAyB,GAEA,KAAAC,GAAAnB,EAAA9B,KAAA,YAAAgD,EAAAE,MAAAC,sBAAA,MAAApB,SAAAzC,OAEAyD,GAAA5D,SAAA,SAAA8D,KAYAnE,EAAA,oBAAA+B,GAAA,oCAAA,WACA,KAAAuC,GAAAtE,EAAA,2CAAAmC,GAAA,EACAmC,GAAAnE,QACAmE,EAAAC,QAAA,iBAAAC,KAAA,cAAAF,EAAAE,KAAA,gBAKAC","file":"script.min.js","sourcesContent":["(function($) {\n  $(document).ready(function () {\n\n    if ($('.js-gallerya-slider').length > 0 && typeof $.fn.flickity === 'function') {\n      var arrowShape = 'M85,50.36033a2.72075,2.72075,0,0,0-2.74945-2.68906H24.01177L47.61119,24.59022a2.65667,2.65667,0,0,0,0-3.80232,2.79411,2.79411,0,0,0-3.88955,0L15.80559,48.09077a2.64614,2.64614,0,0,0,0,3.80232L43.729,79.21211a2.79185,2.79185,0,0,0,3.88771,0,2.64613,2.64613,0,0,0,0-3.80233L24.756,53.04939h57.4946A2.72075,2.72075,0,0,0,85,50.36033Z';\n      $('.js-gallerya-slider').each(function(index, element) {\n        var galleryaSlider = $(this).closest('.gallerya--slider, .gallerya--product-variation-slider');\n        var galleryaSliderData = galleryaSlider.data();\n        var navigation = galleryaSliderData['galleryaNavigation'];\n        var pageDots = galleryaSliderData['galleryaPageDots'];\n        var thumbnails = galleryaSlider.find('.js-gallerya-thumbnail-slider');\n        var count = galleryaSlider.find('[data-gallerya-count]');\n        var sliderArgs = {\n          cellAlign: 'left',\n          contain: true,\n          wrapAround: true,\n          imagesLoaded: true,\n          watchCSS: true,\n          arrowShape: arrowShape\n        };\n        if (typeof pageDots !== 'undefined') {\n          // Let the pageDots property be overriden by a data-attribute.\n          sliderArgs.pageDots = pageDots == true;\n        }\n        else if (navigation == false || thumbnails.length > 0) {\n          sliderArgs.pageDots = false;\n        }\n        // Adjust styling before slider init.\n        $(this).addClass('flickity');\n        $(this).flickity(sliderArgs);\n        var flickityData = $(this).data('flickity');\n        if (thumbnails.length > 0) {\n          var thumbnailsArgs = {\n            asNavFor: element,\n            contain: true,\n            pageDots: false,\n            imagesLoaded: true,\n            groupCells: true,\n            arrowShape: arrowShape\n          };\n          thumbnails.flickity(thumbnailsArgs);\n\n          $(this).on('select.flickity', function () {\n            var index = flickityData.selectedIndex;\n            var className = 'is-currently-selected';\n            thumbnails.find('.flickity-slider li').removeClass(className)\n              .eq(index).addClass(className);\n          });\n        }\n        if (count) {\n          $(this).on('select.flickity', function () {\n            var slideNumber = flickityData.selectedIndex + 1;\n            count.text(slideNumber + '/' + flickityData.slides.length);\n          });\n        }\n      });\n\n      $('.woocommerce-loop-product__link').on('click', function(e) {\n        // Prevent clicks onto slider arrows to bubble through to wrapping product link.\n        if ($(e.target).closest('.flickity-prev-next-button').length !== 0){\n          event.stopPropagation();\n          return false;\n        }\n      });\n    }\n\n    if (typeof $.fn.lightGallery === 'function') {\n      $('.js-gallerya-lightbox').lightGallery({\n        thumbnail: true,\n        showThumbByDefault: false,\n        subHtmlSelectorRelative: true,\n        selector: '.gallerya__image > a'\n      });\n      $('.woocommerce-product-gallery').lightGallery({\n        thumbnail: true,\n        showThumbByDefault: false,\n        subHtmlSelectorRelative: true,\n        selector: '.woocommerce-product-gallery__image > a'\n      });\n    }\n\n    if ($('.js-gallerya-product-thumbnail-slider').length > 0 && typeof $.fn.flickity === 'function') {\n      const $thumbnailSliderEl = $('.js-gallerya-product-thumbnail-slider').parent().find('.flex-control-thumbs').first();\n      const thumbnailSliderArgs = {\n        contain: true,\n        pageDots: false,\n        imagesLoaded: true,\n        groupCells: true,\n      };\n\n      // Calculate # of cols, given the initial images width as the minimum, at least 4 cols.\n      const thumbnailSpacingUnit  = parseInt(getComputedStyle($thumbnailSliderEl.get(0)).getPropertyValue('--thumbnail-spacing-unit'), 10);\n      const thumbnailSliderMargin = parseInt(getComputedStyle($thumbnailSliderEl.get(0)).getPropertyValue('--thumbnail-slider-margin'), 10);\n      const initialImgsWidth = $thumbnailSliderEl.find('li').first().width();\n      const thumbnailSliderWidth = $thumbnailSliderEl.width();\n      const maxCols = 7;\n      var noCols = 4;\n      if (initialImgsWidth > 0 && thumbnailSliderWidth > initialImgsWidth) {\n        while (((thumbnailSliderWidth - (2 * thumbnailSliderMargin)) - (thumbnailSpacingUnit * noCols)) / (noCols + 1) >= initialImgsWidth) {\n          noCols++;\n          if (noCols === maxCols) {\n            break;\n          }\n        }\n        // Update # of cols in css vars.\n        $thumbnailSliderEl.get(0).style.setProperty('--thumbnail-count', noCols);\n      }\n\n      // Adjust styling before slider init.\n      $thumbnailSliderEl.addClass('flickity');\n      const $thumbnailSlider = $thumbnailSliderEl.flickity(thumbnailSliderArgs);\n\n      // Sync thumbnail slider with gallery image changes triggered through the choice of a product variation.\n      $('.single_variation_wrap').on('show_variation', function (event, variation) {\n        // Get the index of the variation thumbnail in the thumbnail slider.\n        const thumbnailIndex = $thumbnailSliderEl.find('img[src=\"' + variation.image.gallery_thumbnail_src + '\"]').parent().index();\n        // Select the variation thumbnail in the thumbnail slider.\n        $thumbnailSlider.flickity('select', thumbnailIndex);\n      });\n    }\n\n    /**\n     * Modifies data-srcset of product gallery first image on variation change.\n     *\n     * lightGallery gets the srcset from the anchor element that wraps the\n     * image. On variation change, WooCommerce changes the srcset of the first\n     * product image with the variation one, but not the srcset of the wrapping\n     * anchor element.\n     */\n    $('.variations_form').on('woocommerce_variation_has_changed', function() {\n      const firstImage = $('.woocommerce-product-gallery__image img').eq(0);\n      if (firstImage.length) {\n        firstImage.parents('[data-srcset]').attr('data-srcset', firstImage.attr('srcset'));\n      }\n    });\n\n  });\n})(jQuery);\n"],"sourceRoot":"assets/scripts/"}