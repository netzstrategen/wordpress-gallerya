{"version":3,"sources":["../assets/scripts/script.js"],"names":["$","document","ready","initSlider","length","fn","flickity","arrowShape","each","index","element","galleryaSlider","this","closest","navigation","data","pageDots","thumbnails","find","count","productLink","parents","sliderArgs","cellAlign","contain","wrapAround","imagesLoaded","watchCSS","lazyLoad","hasClass","addClass","on","event","variantURL","prop","flickityData","thumbnailsArgs","asNavFor","groupCells","selectedIndex","className","removeClass","eq","slideNumber","text","slides","e","target","stopPropagation","setProductGalleryVideoSlide","$galleryWraper","$galleryElements","children","$firstGalleryElement","first","firstImage","detach","insertAfter","setVideoPlayerUrl","setProductGalleryVideoThumbnail","$videoContent","videoThumbSrc","$sliderThumbs","videoThumbPos","videoThumb","attr","parent","slideIndex","slide","$videoPlayer","restoreSliderThumbs","$slider","hiddenSlides","css","fancybox","selector","closeExisting","loop","keyboard","buttons","animationEffect","animationDuration","transitionEffect","thumbs","autoStart","axis","image","preload","iframe","lang","fancyboxTranslations","language","i18n","de","CLOSE","close","NEXT","next","PREV","prev","ERROR","error","PLAY_START","play_start","PLAY_STOP","play_stop","FULL_SCREEN","full_screen","THUMBS","DOWNLOAD","download","SHARE","share","ZOOM","zoom","afterShow","instance","current","trigger","opts","$orig","beforeClose","$thumbnailSliderEl","thumbnailSliderArgs","thumbnailSpacingUnit","parseInt","getComputedStyle","get","getPropertyValue","thumbnailSliderMargin","initialImgsWidth","width","thumbnailSliderWidth","maxCols","noCols","style","setProperty","numberOfThumbnails","prevNextButtons","pointer","cellElement","cellIndex","$thumbnailSlider","$singleVariation","productGallery","currentTarget","flexslider","variation","selectedVariationImages","product_variation_images","gallery","variation_id","$this","thumb","includes","thumbnailIndex","gallery_thumbnail_src","jQuery"],"mappings":"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","file":"script.min.js","sourcesContent":["(function ($) {\n  $(document).ready(function () {\n    initSlider();\n\n    // Reinitialize slider for Woocommerce Related Accessories\n    $(document).on('reloadGalleryaSlider', function () {\n      initSlider();\n    });\n    \n    // Adds lightbox functionality to product gallery.\n    $().fancybox({\n      selector : '[data-fancybox], .js-gallerya-lightbox .gallerya__image > a, .woocommerce-product-gallery .woocommerce-product-gallery__image > a',\n      closeExisting: false,\n      loop: true,\n      keyboard: true,\n      buttons: [\n        'zoom',\n        'fullScreen',\n        'share',\n        'download',\n        'thumbs',\n        'close'\n      ],\n      animationEffect: 'zoom',\n      animationDuration: 250,\n      transitionEffect: 'slide',\n      thumbs: {\n        autoStart: false,\n        axis: 'x'\n      },\n      image: {\n        preload: true\n      },\n      iframe: {\n        preload: true,\n      },\n      lang: fancyboxTranslations.language,\n      i18n: {\n        de: {\n          CLOSE: fancyboxTranslations.de.close,\n          NEXT: fancyboxTranslations.de.next,\n          PREV: fancyboxTranslations.de.prev,\n          ERROR: fancyboxTranslations.de.error,\n          PLAY_START: fancyboxTranslations.de.play_start,\n          PLAY_STOP: fancyboxTranslations.de.play_stop,\n          FULL_SCREEN: fancyboxTranslations.de.full_screen,\n          THUMBS: fancyboxTranslations.de.thumbs,\n          DOWNLOAD: fancyboxTranslations.de.download,\n          SHARE: fancyboxTranslations.de.share,\n          ZOOM: fancyboxTranslations.de.zoom\n        }\n      },\n      // Hide the gallery in the background when the modal is open to avoid distraction to the user.\n      afterShow: function (instance, current) {\n        const trigger = current.opts.$orig;\n        $(trigger).parents('.woocommerce-product-gallery').addClass('gallerya-hidden');\n      },\n      beforeClose: function (instance, current) {\n        $('.gallerya-hidden').removeClass('gallerya-hidden');\n      }\n    });\n\n    // Adds thumbnails slider to product gallery on product detail page.\n    if ($('.js-gallerya-product-thumbnail-slider').length > 0 && typeof $.fn.flickity === 'function') {\n      const $thumbnailSliderEl = $('.js-gallerya-product-thumbnail-slider').parent().find('.flex-control-thumbs').first();\n\n      if (!$thumbnailSliderEl.length) {\n        return;\n      }\n\n      const thumbnailSliderArgs = {\n        contain: true,\n        pageDots: false,\n        imagesLoaded: true,\n        groupCells: true,\n      };\n\n      // Calculate # of cols, given the initial images width as the minimum, at least 4 cols.\n      const thumbnailSpacingUnit  = parseInt(getComputedStyle($thumbnailSliderEl.get(0)).getPropertyValue('--thumbnail-spacing-unit'), 10);\n      const thumbnailSliderMargin = parseInt(getComputedStyle($thumbnailSliderEl.get(0)).getPropertyValue('--thumbnail-slider-margin'), 10);\n      const initialImgsWidth = $thumbnailSliderEl.find('li').first().width();\n      const thumbnailSliderWidth = $thumbnailSliderEl.width();\n      const maxCols = 7;\n      let noCols = 4;\n\n      if (initialImgsWidth > 0 && thumbnailSliderWidth > initialImgsWidth) {\n        while (((thumbnailSliderWidth - (2 * thumbnailSliderMargin)) - (thumbnailSpacingUnit * noCols)) / (noCols + 1) >= initialImgsWidth) {\n          noCols++;\n          if (noCols === maxCols) {\n            break;\n          }\n        }\n        // Update # of cols in css vars.\n        $thumbnailSliderEl.get(0).style.setProperty('--thumbnail-count', noCols);\n      }\n\n      // If less thumbs than slider viewport, don't show prev/next arrows.\n      const numberOfThumbnails = $thumbnailSliderEl.find('li').length;\n      thumbnailSliderArgs.prevNextButtons = numberOfThumbnails > noCols;\n\n      // Add video player and video thumbnail to the product gallery.\n      $thumbnailSliderEl\n        .addClass('flickity')\n        .on('ready.flickity', function () {\n          setProductGalleryVideoSlide();\n        })\n        .on('settle.flickity', function () {\n          setProductGalleryVideoThumbnail();\n        })\n        .on('staticClick.flickity', function (event, pointer, cellElement, cellIndex) {\n          if ($(cellElement).hasClass('slider-thumb-video')) {\n            setVideoPlayerUrl(cellIndex);\n          }\n        });\n      // Initialise the thumbnail slider.\n      const $thumbnailSlider = $thumbnailSliderEl.flickity(thumbnailSliderArgs);\n      const $singleVariation = $('.single_variation_wrap');\n      // Initially no slide is hidden.\n      $thumbnailSliderEl.hiddenSlides = 0;\n\n      // Selects the slide in the product gallery when the user hovers over the\n      // thumbnail images.\n      const productGallery = $('.woocommerce-product-gallery').data('flexslider');\n      if (productGallery) {\n        $thumbnailSlider.on('mouseover', 'li', function (event) {\n          const target = $(event.currentTarget);\n          productGallery.flexslider(target.index());\n          if (target.hasClass('slider-thumb-video')) {\n            setVideoPlayerUrl(target.index());\n          }\n        });\n      }\n\n      // Keep the thumbnails slider in sync with the lightbox navigation.\n      // When we jump to a previous/next slide, the corresponding thumbnail\n      // should also be selected and the slider repositioned.\n      $(document).on('afterShow.fb', function(e, instance, slide) {\n        productGallery.flexslider(slide.index);\n        $thumbnailSliderEl.flickity('selectCell', slide.index);\n      });\n\n      // Reacts to product variation selection.\n      $singleVariation.on('show_variation', function (event, variation) {\n        restoreSliderThumbs($thumbnailSliderEl);\n        // If selected variation has its own images gallery, lower the opacity\n        // of all other thumbnails.\n        const productGallery = product_variation_images.gallery;\n        const selectedVariationImages = product_variation_images[variation.variation_id] || [];\n        if (selectedVariationImages.length > 1) {\n          $thumbnailSliderEl.find('img').each(function () {\n            const $this = $(this);\n            const thumb = $this.attr('src');\n            // Lower the opaciy of the image if its not in the selected variation gallery.\n            if (!selectedVariationImages.includes(thumb)) {\n              $this.parent().css('opacity', 0.15);\n              $thumbnailSliderEl.hiddenSlides++;\n            }\n          });\n          if ($thumbnailSliderEl.hiddenSlides) {\n            $thumbnailSliderEl.flickity('reposition');\n          }\n        }\n        // Get the index of the variation thumbnail in the thumbnail slider.\n        const thumbnailIndex = $thumbnailSliderEl\n          .find('img[src=\"' + variation.image.gallery_thumbnail_src + '\"]')\n          .parent()\n          .index();\n        // Select the variation thumbnail in the thumbnail slider.\n        $thumbnailSliderEl.flickity('selectCell', thumbnailIndex);\n      });\n\n      // Reacts to product variation selection reset.\n      $singleVariation.on('hide_variation', function (event) {\n        if ($thumbnailSliderEl.hiddenSlides) {\n          restoreSliderThumbs($thumbnailSliderEl);\n          $thumbnailSliderEl.hiddenSlides = 0;\n        }\n      });\n    }\n    else {\n      // Flickity is not active.\n      setProductGalleryVideoSlide();\n      setProductGalleryVideoThumbnail();\n      $('.single-product-summary .flex-control-nav li').on('click', function () {\n        const $this = $(this);\n        if ($this.hasClass('slider-thumb-video')) {\n          setVideoPlayerUrl($this.index());\n        }\n      });\n    }\n\n    /**\n    * Initialize gallerya slider\n    */\n    function initSlider() {\n      // Adds slide navigation through variation thumbnails for variable products\n      // displayed in products listings.\n      if ($('.js-gallerya-slider').length > 0 && typeof $.fn.flickity === 'function') {\n        const arrowShape = 'M85,50.36033a2.72075,2.72075,0,0,0-2.74945-2.68906H24.01177L47.61119,24.59022a2.65667,2.65667,0,0,0,0-3.80232,2.79411,2.79411,0,0,0-3.88955,0L15.80559,48.09077a2.64614,2.64614,0,0,0,0,3.80232L43.729,79.21211a2.79185,2.79185,0,0,0,3.88771,0,2.64613,2.64613,0,0,0,0-3.80233L24.756,53.04939h57.4946A2.72075,2.72075,0,0,0,85,50.36033Z';\n\n        $('.js-gallerya-slider').each(function (index, element) {\n          const galleryaSlider = $(this).closest('.gallerya--slider, .gallerya--product-variation-slider');\n          const navigation = galleryaSlider.data('gallerya-navigation');\n          const pageDots = galleryaSlider.data('galleryaPageDots');\n          const thumbnails = galleryaSlider.find('.js-gallerya-thumbnail-slider');\n          const count = galleryaSlider.find('[data-gallerya-count]');\n          const productLink = galleryaSlider.parents('a.woocommerce-loop-product__link');\n          const sliderArgs = {\n            cellAlign: 'left',\n            contain: true,\n            wrapAround: true,\n            imagesLoaded: true,\n            watchCSS: true,\n            lazyLoad: true,\n          };\n\n          if (!galleryaSlider.hasClass('gallerya--product-variation-slider')) {\n            sliderArgs.arrowShape = arrowShape;\n          }\n          if (typeof pageDots !== 'undefined') {\n            // Let the pageDots property be overriden by a data-attribute.\n            sliderArgs.pageDots = pageDots == true;\n          }\n          else if (typeof navigation === 'undefined' || navigation == false || thumbnails.length > 0) {\n            sliderArgs.pageDots = false;\n          }\n\n          // Adjust styling before slider init.\n          $(this).addClass('flickity');\n          $(this).flickity(sliderArgs);\n\n          // Handle the slide changing to update the variant url\n          $(this).on('change.flickity', function (event, index) {\n            const variantURL = $(this).find('li.is-selected').data('gallerya-variant-permalink');\n            if (variantURL) {\n              productLink.prop('href', variantURL);\n            }\n          });\n\n          const flickityData = $(this).data('flickity');\n          if (thumbnails.length > 0) {\n            const thumbnailsArgs = {\n              asNavFor: element,\n              contain: true,\n              pageDots: false,\n              imagesLoaded: true,\n              groupCells: true,\n              arrowShape: arrowShape,\n            };\n            thumbnails.flickity(thumbnailsArgs);\n\n            $(this).on('select.flickity', function () {\n              const index = flickityData.selectedIndex;\n              const className = 'is-currently-selected';\n              thumbnails.find('.flickity-slider li').removeClass(className)\n                .eq(index).addClass(className);\n            });\n          }\n          if (count) {\n            $(this).on('select.flickity', function () {\n              const slideNumber = flickityData.selectedIndex + 1;\n              count.text(slideNumber + '/' + flickityData.slides.length);\n            });\n          }\n        });\n\n        $('.woocommerce-loop-product__link').on('click', function (e) {\n          // Prevent clicks onto slider arrows to bubble through to wrapping product link.\n          if ($(e.target).closest('.flickity-prev-next-button').length !== 0) {\n            e.stopPropagation();\n            return false;\n          }\n        });\n      }\n    }\n\n    /**\n     * Swaps first and second slide of product gallery, if first is a video.\n     */\n    function setProductGalleryVideoSlide() {\n      // Video should be the second element in the product gallery.\n      const $galleryWraper = $('.woocommerce-product-gallery .woocommerce-product-gallery__wrapper');\n      const $galleryElements = $galleryWraper\n        .children('.woocommerce-product-gallery__image');\n      if ($galleryElements.length <= 1) {\n        return;\n      }\n      const $firstGalleryElement = $galleryElements.first();\n      if ($firstGalleryElement.hasClass('has-video')) {\n        // Set video as second slide.\n        const firstImage = $galleryWraper\n          .children('.woocommerce-product-gallery__image:not(.has-video)')\n          .first();\n        $firstGalleryElement.detach().insertAfter(firstImage);\n        setVideoPlayerUrl(1);\n      }\n    }\n\n    /**\n     * Swaps first and second thumbnail of product gallery, if first is a video.\n     */\n    function setProductGalleryVideoThumbnail() {\n      const $videoContent = $('.woocommerce-product-gallery .gallerya__video-content').first();\n      // If there's no video content, exit.\n      if ($videoContent.length < 1) {\n        return;\n      }\n      const videoThumbSrc = $videoContent.data('video-thumb');\n      const $sliderThumbs = $('.flex-control-nav li img');\n      // Video thumb should be the second element in the slider,\n      // unless there's only one slide.\n      const videoThumbPos = $sliderThumbs.length > 1 ? 1 : 0;\n      const videoThumb = $sliderThumbs.eq(videoThumbPos);\n      // Avoid switching thumbnails if second thumb is already the video.\n      if (videoThumb.attr('src') !== videoThumbSrc) {\n        $sliderThumbs.first().attr('src', videoThumb.attr('src'));\n        videoThumb\n          .attr('src', videoThumbSrc)\n          // Ensure lazy loaded image is the video thumbnail.\n          .attr('data-lazy-src', videoThumbSrc)\n          .parent().addClass('slider-thumb-video');\n      }\n    }\n\n    /**\n     * Sets the URL of the video slide referred by a video thumbnail.\n     *\n     * Initially we don't set video URL in the video slide iframe to avoid\n     * loading it if unless it is displayed.\n     * If the thumbnail clicked refers to a video slide, then we assign\n     * the video URL to the player iframe.\n     *\n     * @param {int} slideIndex\n     *   Index of the thumbnail and the slide in the product gallery.\n     */\n    function setVideoPlayerUrl(slideIndex) {\n      const slide = $('.woocommerce-product-gallery .woocommerce-product-gallery__image').eq(slideIndex);\n      if (!$(slide).hasClass('has-video')) {\n        return;\n      }\n      const $videoPlayer = $(slide).find('iframe').first();\n      if (!$videoPlayer.attr('src')) {\n        $videoPlayer.attr('src', $(slide).data('video-url'));\n      }\n    }\n\n    /**\n     * Restores opacity of slides in the given flickity slider.\n     *\n     * @param {object} $slider\n     *   jQuery object for the flickity slider.\n     */\n    function restoreSliderThumbs($slider) {\n      if ($slider.hiddenSlides) {\n        $slider.find('li').css('opacity', 1);\n        $slider.flickity('reposition');\n        $slider.flickity('selectCell', 0);\n        $slider.hiddenSlides = 0;\n      }\n    }\n\n  });\n})(jQuery);\n"],"sourceRoot":"assets/scripts/"}