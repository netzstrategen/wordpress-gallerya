{"version":3,"sources":["../assets/scripts/script.js"],"names":["$","document","ready","length","fn","flickity","arrowShape","each","index","element","galleryaSlider","this","closest","navigation","data","pageDots","thumbnails","find","count","sliderArgs","cellAlign","contain","wrapAround","imagesLoaded","watchCSS","lazyLoad","hasClass","addClass","flickityData","thumbnailsArgs","asNavFor","groupCells","on","selectedIndex","className","removeClass","eq","slideNumber","text","slides","e","target","event","stopPropagation","lightGallery","thumbnail","showThumbByDefault","subHtmlSelectorRelative","selector","$thumbnailSliderEl","parent","first","thumbnailSliderArgs","thumbnailSpacingUnit","parseInt","getComputedStyle","get","getPropertyValue","thumbnailSliderMargin","initialImgsWidth","width","thumbnailSliderWidth","maxCols","noCols","style","setProperty","$galleryWraper","$galleryElements","children","$firstGalleryElement","detach","insertAfter","$videoContent","$sliderThumbs","videoThumbPos","videoThumbSrc","$sliderThumb","attr","$thumbnailSlider","variation","thumbnailIndex","image","gallery_thumbnail_src","firstImage","parents","jQuery"],"mappings":"CAAA,SAAUA,GACRA,EAAEC,UAAUC,MAAM,WAEhB,GAAIF,EAAE,uBAAuBG,OAAS,GAA8B,kBAAlBH,GAAEI,GAAGC,SAAyB,CAC9E,GAAIC,GAAa,4UACjBN,GAAE,uBAAuBO,KAAK,SAASC,EAAOC,GAC5C,GAAMC,GAAiBV,EAAEW,MAAMC,QAAQ,0DACjCC,EAAaH,EAAeI,KAAK,uBACjCC,EAAWL,EAAeI,KAAK,oBAC/BE,EAAaN,EAAeO,KAAK,iCACjCC,EAAQR,EAAeO,KAAK,yBAC5BE,GACJC,UAAW,OACXC,SAAS,EACTC,YAAY,EACZC,cAAc,EACdC,UAAU,EACVC,UAAU,EAEPf,GAAegB,SAAS,wCAC3BP,EAAWb,WAAaA,GAEF,mBAAbS,GAETI,EAAWJ,SAAuB,GAAZA,GAEO,mBAAfF,IAA4C,GAAdA,GAAuBG,EAAWb,OAAS,KACvFgB,EAAWJ,UAAW,GAGxBf,EAAEW,MAAMgB,SAAS,YACjB3B,EAAEW,MAAMN,SAASc,EACjB,IAAIS,GAAe5B,EAAEW,MAAMG,KAAK,WAChC,IAAIE,EAAWb,OAAS,EAAG,CACzB,GAAM0B,IACJC,SAAUrB,EACVY,SAAS,EACTN,UAAU,EACVQ,cAAc,EACdQ,YAAY,EACZzB,WAAYA,EAEdU,GAAWX,SAASwB,GAEpB7B,EAAEW,MAAMqB,GAAG,kBAAmB,WAC5B,GAAMxB,GAAQoB,EAAaK,cACrBC,EAAY,uBAClBlB,GAAWC,KAAK,uBAAuBkB,YAAYD,GAChDE,GAAG5B,GAAOmB,SAASO,KAGtBhB,GACFlB,EAAEW,MAAMqB,GAAG,kBAAmB,WAC5B,GAAMK,GAAcT,EAAaK,cAAgB,CACjDf,GAAMoB,KAAKD,EAAc,IAAMT,EAAaW,OAAOpC,YAKzDH,EAAE,mCAAmCgC,GAAG,QAAS,SAASQ,GAExD,GAAiE,IAA7DxC,EAAEwC,EAAEC,QAAQ7B,QAAQ,8BAA8BT,OAEpD,MADAuC,OAAMC,mBACC,IAoBb,GAfiC,kBAAtB3C,GAAEI,GAAGwC,eACd5C,EAAE,yBAAyB4C,cACzBC,WAAW,EACXC,oBAAoB,EACpBC,yBAAyB,EACzBC,SAAU,yBAEZhD,EAAE,gCAAgC4C,cAChCC,WAAW,EACXC,oBAAoB,EACpBC,yBAAyB,EACzBC,SAAU,6CAIVhD,EAAE,yCAAyCG,OAAS,GAA8B,kBAAlBH,GAAEI,GAAGC,SAAyB,CAChG,GAAM4C,GAAqBjD,EAAE,yCAAyCkD,SAASjC,KAAK,wBAAwBkC,OAC5G,KAAKF,EAAmB9C,OACtB,MAGF,IAAMiD,IACJ/B,SAAS,EACTN,UAAU,EACVQ,cAAc,EACdQ,YAAY,GAIRsB,EAAwBC,SAASC,iBAAiBN,EAAmBO,IAAI,IAAIC,iBAAiB,4BAA6B,IAC3HC,EAAwBJ,SAASC,iBAAiBN,EAAmBO,IAAI,IAAIC,iBAAiB,6BAA8B,IAC5HE,EAAmBV,EAAmBhC,KAAK,MAAMkC,QAAQS,QACzDC,EAAuBZ,EAAmBW,QAC1CE,EAAU,EACZC,EAAS,CACb,IAAIJ,EAAmB,GAAKE,EAAuBF,EAAkB,CACnE,MAASE,EAAwB,EAAIH,EAA2BL,EAAuBU,IAAYA,EAAS,IAAMJ,IAChHI,IACIA,IAAWD,KAKjBb,EAAmBO,IAAI,GAAGQ,MAAMC,YAAY,oBAAqBF,GAInEd,EACGtB,SAAS,YACTK,GAAG,iBAAkB,SAASU,GAE7B,GAAMwB,GAAiBlE,EAAE,iEACnBmE,EAAmBD,EAAeE,SAAS,MACjD,MAAID,EAAiBhE,QAAU,GAA/B,CAGA,GAAMkE,GAAuBF,EAAiBhB,OAC1CkB,GAAqB3C,SAAS,cAChC2C,EAAqBC,SAASC,YAAYL,EAAeE,SAAS,OAAOjB,YAG5EnB,GAAG,kBAAmB,SAASU,EAAOlC,GAErC,GAAMgE,GAAgBxE,EAAE,mDACxB,IAAIwE,EAAcrE,OAAQ,CACxB,GAAMsE,GAAgBzE,EAAE,mDAElB0E,EAAgBD,EAActE,OAAS,EAAI,EAAI,EAC/CwE,EAAgBH,EAAc1D,KAAK,cAEzC8D,cAAeH,EAAcrC,GAAGsC,GAChCE,aACGC,KAAK,MAAOF,GAEZE,KAAK,gBAAgBF,GACrBzB,SAASvB,SAAS,wBAG3B,IAAMmD,GAAmB7B,EAAmB5C,SAAS+C,EAGrDpD,GAAE,0BAA0BgC,GAAG,iBAAkB,SAAUU,EAAOqC,GAEhE,GAAMC,GAAiB/B,EAAmBhC,KAAK,YAAc8D,EAAUE,MAAMC,sBAAwB,MAAMhC,SAAS1C,OAEpHsE,GAAiBzE,SAAS,SAAU2E,KAYxChF,EAAE,oBAAoBgC,GAAG,oCAAqC,WAC5D,GAAMmD,GAAanF,EAAE,2CAA2CoC,GAAG,EAC/D+C,GAAWhF,QACbgF,EAAWC,QAAQ,iBAAiBP,KAAK,cAAeM,EAAWN,KAAK,gBAK7EQ","file":"script.min.js","sourcesContent":["(function($) {\n  $(document).ready(function () {\n\n    if ($('.js-gallerya-slider').length > 0 && typeof $.fn.flickity === 'function') {\n      var arrowShape = 'M85,50.36033a2.72075,2.72075,0,0,0-2.74945-2.68906H24.01177L47.61119,24.59022a2.65667,2.65667,0,0,0,0-3.80232,2.79411,2.79411,0,0,0-3.88955,0L15.80559,48.09077a2.64614,2.64614,0,0,0,0,3.80232L43.729,79.21211a2.79185,2.79185,0,0,0,3.88771,0,2.64613,2.64613,0,0,0,0-3.80233L24.756,53.04939h57.4946A2.72075,2.72075,0,0,0,85,50.36033Z';\n      $('.js-gallerya-slider').each(function(index, element) {\n        const galleryaSlider = $(this).closest('.gallerya--slider, .gallerya--product-variation-slider');\n        const navigation = galleryaSlider.data('gallerya-navigation');\n        const pageDots = galleryaSlider.data('galleryaPageDots');\n        const thumbnails = galleryaSlider.find('.js-gallerya-thumbnail-slider');\n        const count = galleryaSlider.find('[data-gallerya-count]');\n        const sliderArgs = {\n          cellAlign: 'left',\n          contain: true,\n          wrapAround: true,\n          imagesLoaded: true,\n          watchCSS: true,\n          lazyLoad: true,\n        };\n        if (!galleryaSlider.hasClass('gallerya--product-variation-slider')) {\n          sliderArgs.arrowShape = arrowShape;\n        }\n        if (typeof pageDots !== 'undefined') {\n          // Let the pageDots property be overriden by a data-attribute.\n          sliderArgs.pageDots = pageDots == true;\n        }\n        else if (typeof navigation === 'undefined' || navigation == false || thumbnails.length > 0) {\n          sliderArgs.pageDots = false;\n        }\n        // Adjust styling before slider init.\n        $(this).addClass('flickity');\n        $(this).flickity(sliderArgs);\n        var flickityData = $(this).data('flickity');\n        if (thumbnails.length > 0) {\n          const thumbnailsArgs = {\n            asNavFor: element,\n            contain: true,\n            pageDots: false,\n            imagesLoaded: true,\n            groupCells: true,\n            arrowShape: arrowShape,\n          };\n          thumbnails.flickity(thumbnailsArgs);\n\n          $(this).on('select.flickity', function () {\n            const index = flickityData.selectedIndex;\n            const className = 'is-currently-selected';\n            thumbnails.find('.flickity-slider li').removeClass(className)\n              .eq(index).addClass(className);\n          });\n        }\n        if (count) {\n          $(this).on('select.flickity', function () {\n            const slideNumber = flickityData.selectedIndex + 1;\n            count.text(slideNumber + '/' + flickityData.slides.length);\n          });\n        }\n      });\n\n      $('.woocommerce-loop-product__link').on('click', function(e) {\n        // Prevent clicks onto slider arrows to bubble through to wrapping product link.\n        if ($(e.target).closest('.flickity-prev-next-button').length !== 0){\n          event.stopPropagation();\n          return false;\n        }\n      });\n    }\n\n    if (typeof $.fn.lightGallery === 'function') {\n      $('.js-gallerya-lightbox').lightGallery({\n        thumbnail: true,\n        showThumbByDefault: false,\n        subHtmlSelectorRelative: true,\n        selector: '.gallerya__image > a'\n      });\n      $('.woocommerce-product-gallery').lightGallery({\n        thumbnail: true,\n        showThumbByDefault: false,\n        subHtmlSelectorRelative: true,\n        selector: '.woocommerce-product-gallery__image > a'\n      });\n    }\n\n    if ($('.js-gallerya-product-thumbnail-slider').length > 0 && typeof $.fn.flickity === 'function') {\n      const $thumbnailSliderEl = $('.js-gallerya-product-thumbnail-slider').parent().find('.flex-control-thumbs').first();\n      if (!$thumbnailSliderEl.length) {\n        return;\n      }\n\n      const thumbnailSliderArgs = {\n        contain: true,\n        pageDots: false,\n        imagesLoaded: true,\n        groupCells: true,\n      };\n\n      // Calculate # of cols, given the initial images width as the minimum, at least 4 cols.\n      const thumbnailSpacingUnit  = parseInt(getComputedStyle($thumbnailSliderEl.get(0)).getPropertyValue('--thumbnail-spacing-unit'), 10);\n      const thumbnailSliderMargin = parseInt(getComputedStyle($thumbnailSliderEl.get(0)).getPropertyValue('--thumbnail-slider-margin'), 10);\n      const initialImgsWidth = $thumbnailSliderEl.find('li').first().width();\n      const thumbnailSliderWidth = $thumbnailSliderEl.width();\n      const maxCols = 7;\n      let noCols = 4;\n      if (initialImgsWidth > 0 && thumbnailSliderWidth > initialImgsWidth) {\n        while (((thumbnailSliderWidth - (2 * thumbnailSliderMargin)) - (thumbnailSpacingUnit * noCols)) / (noCols + 1) >= initialImgsWidth) {\n          noCols++;\n          if (noCols === maxCols) {\n            break;\n          }\n        }\n        // Update # of cols in css vars.\n        $thumbnailSliderEl.get(0).style.setProperty('--thumbnail-count', noCols);\n      }\n\n      // Adjust styling before slider init.\n      $thumbnailSliderEl\n        .addClass('flickity')\n        .on('ready.flickity', function(event) {\n          // Video should be the second element in the product gallery.\n          const $galleryWraper = $('.sidebar-single-product .woocommerce-product-gallery__wrapper');\n          const $galleryElements = $galleryWraper.children('div');\n          if ($galleryElements.length <= 1) {\n            return;\n          }\n          const $firstGalleryElement = $galleryElements.first();\n          if ($firstGalleryElement.hasClass('has-video')) {\n            $firstGalleryElement.detach().insertAfter($galleryWraper.children('div').first());\n          }\n        })\n        .on('settle.flickity', function(event, index) {\n          // Insert the video thumbnail in the thumbs slider.\n          const $videoContent = $('.sidebar-single-product .gallerya__video-content');\n          if ($videoContent.length) {\n            const $sliderThumbs = $('.sidebar-single-product .flickity-slider li img');\n            // Insert the video thumb in second position, if posible.\n            const videoThumbPos = $sliderThumbs.length > 1 ? 1 : 0;\n            const videoThumbSrc = $videoContent.data('video-thumb');\n\n            $sliderThumb = $sliderThumbs.eq(videoThumbPos);\n            $sliderThumb\n              .attr('src', videoThumbSrc)\n              // Ensure lazy loaded image is the video thumbnail.\n              .attr('data-lazy-src',videoThumbSrc)\n              .parent().addClass('slider-thumb-video');\n          }\n        });\n      const $thumbnailSlider = $thumbnailSliderEl.flickity(thumbnailSliderArgs);\n\n      // Sync thumbnail slider with gallery image changes triggered through the choice of a product variation.\n      $('.single_variation_wrap').on('show_variation', function (event, variation) {\n        // Get the index of the variation thumbnail in the thumbnail slider.\n        const thumbnailIndex = $thumbnailSliderEl.find('img[src=\"' + variation.image.gallery_thumbnail_src + '\"]').parent().index();\n        // Select the variation thumbnail in the thumbnail slider.\n        $thumbnailSlider.flickity('select', thumbnailIndex);\n      });\n    }\n\n    /**\n     * Modifies data-srcset of product gallery first image on variation change.\n     *\n     * lightGallery gets the srcset from the anchor element that wraps the\n     * image. On variation change, WooCommerce changes the srcset of the first\n     * product image with the variation one, but not the srcset of the wrapping\n     * anchor element.\n     */\n    $('.variations_form').on('woocommerce_variation_has_changed', function() {\n      const firstImage = $('.woocommerce-product-gallery__image img').eq(0);\n      if (firstImage.length) {\n        firstImage.parents('[data-srcset]').attr('data-srcset', firstImage.attr('srcset'));\n      }\n    });\n\n  });\n})(jQuery);\n"],"sourceRoot":"assets/scripts/"}