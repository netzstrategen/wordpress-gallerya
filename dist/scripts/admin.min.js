!function(a){function i(i){var n;return void 0!==n?void n.open():(n=wp.media.frames.file_frame=wp.media({frame:"post",state:"insert",multiple:!0,library:{type:"image"}}),n.on("open",function(){a("#variation_gallery_".concat(i," .variation_gallery__image--placeholder")).remove()}),n.on("insert",function(e){var o=n.state().get("selection").map(function(a){return a.toJSON(),a}),t=o.map(function(a){return{image_id:a.attributes.id,thumbnail_url:a.attributes.sizes.thumbnail.url}});a.ajax({type:"post",dataType:"json",url:gallerya_admin.ajaxurl,data:{action:"gallerya_add_variation_image",nonce:gallerya_admin.nonce,variation_id:i,images:t},success:function(i){!0===i.success&&i?i.images.forEach(function(n){a("#variation_gallery_".concat(i.variation_id," .variation_gallery__images")).append('<li\n                id="variation_'.concat(i.variation_id,"_image_").concat(n.image_id,'"\n                class="variation_gallery__image"\n                data-image_id="').concat(n.image_id,'"\n                data-variation_id="').concat(i.variation_id,'"\n              >\n                <img src="').concat(n.thumbnail_url,'" />\n              </li>'))}):console.error(i.data)}})}),void n.open())}a("#woocommerce-product-data").on("woocommerce_variations_loaded",function(){a(".variation_gallery").on("click",".variation_gallery__add-image",function(){var n=a(this).data("variation_id");a("#variation_gallery_".concat(n," .variation_gallery__images")).append('<li class="variation_gallery__image variation_gallery__image--placeholder"></li>'),i(n)}),a(".variation_gallery").on("click",".variation_gallery__image",function(){var i=a(this);i.hasClass("variation_gallery__placeholder")||i.hasClass("disabled")||(i.css("opacity","0.3"),i.addClass("disabled"),a.ajax({type:"post",dataType:"json",url:gallerya_admin.ajaxurl,data:{action:"gallerya_remove_variation_image",nonce:gallerya_admin.nonce,variation_id:i.data("variation_id"),image_id:i.data("image_id")},success:function(i){!0===i.success&&i?a("#variation_".concat(i.variation_id,"_image_").concat(i.image_id)).remove():console.error(i.data)}}))})})}(jQuery);
//# sourceMappingURL=admin.min.js.map
