!function(){var a;(a=jQuery)("#woocommerce-product-data").on("woocommerce_variations_loaded",(function(){a(".variation_gallery").on("click",".variation_gallery__add-image",(function(){const i=a(this).data("variation_id");a(`#variation_gallery_${i} .variation_gallery__images`).append('<li class="variation_gallery__image variation_gallery__image--placeholder"></li>'),function renderMediaUploader(i){let e;void 0===e?(e=wp.media.frames.file_frame=wp.media({frame:"post",state:"insert",multiple:!0,library:{type:"image"}}),e.on("open",(function(){a(`#variation_gallery_${i} .variation_gallery__image--placeholder`).remove()})),e.on("insert",(function(n){const r=e.state().get("selection").map((function(a){return a.toJSON(),a})).map((function(a){return{image_id:a.attributes.id,thumbnail_url:a.attributes.sizes.thumbnail.url}}));a.ajax({type:"post",dataType:"json",url:gallerya_admin.ajaxurl,data:{action:"gallerya_add_variation_image",nonce:gallerya_admin.nonce,variation_id:i,images:r},success:function(i){i&&!0===i.success?i.images.forEach((e=>{a(`#variation_gallery_${i.variation_id} .variation_gallery__images`).append(`<li\n                id="variation_${i.variation_id}_image_${e.image_id}"\n                class="variation_gallery__image"\n                data-image_id="${e.image_id}"\n                data-variation_id="${i.variation_id}"\n              >\n                <img src="${e.thumbnail_url}" />\n              </li>`)})):console.error(i.data)}})})),e.open()):e.open()}(i)})),a(".variation_gallery").on("click",".variation_gallery__image",(function(){const i=a(this);i.hasClass("variation_gallery__placeholder")||i.hasClass("disabled")||(i.css("opacity","0.3"),i.addClass("disabled"),a.ajax({type:"post",dataType:"json",url:gallerya_admin.ajaxurl,data:{action:"gallerya_remove_variation_image",nonce:gallerya_admin.nonce,variation_id:i.data("variation_id"),image_id:i.data("image_id")},success:function(i){i&&!0===i.success?a(`#variation_${i.variation_id}_image_${i.image_id}`).remove():console.error(i.data)}}))}))}))}();